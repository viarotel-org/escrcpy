import{_ as e,c as a,o as s,aj as i}from"./chunks/framework.MtKKuSHf.js";const g=JSON.parse('{"title":"Audio（音频）","description":"","frontmatter":{"title":"Audio（音频）"},"headers":[],"relativePath":"zhHans/reference/scrcpy/audio.md","filePath":"zhHans/reference/scrcpy/audio.md","lastUpdated":1747291551000}'),d={name:"zhHans/reference/scrcpy/audio.md"},o=i(`<h1 id="音频" tabindex="-1">音频 <a class="header-anchor" href="#音频" aria-label="Permalink to &quot;音频&quot;">​</a></h1><p>音频转发功能支持运行 Android 11 或更高版本的设备，并默认启用：</p><ul><li><strong>Android 12 或更新版本</strong>：开箱即用。</li><li><strong>Android 11</strong>：需要确保在启动 scrcpy 时设备屏幕已解锁。此时会短暂弹出一个虚假窗口，让系统认为 shell 应用处于前台。若不满足此条件，音频捕获将失败。</li><li><strong>Android 10 或更早版本</strong>：无法捕获音频，功能自动禁用。</li></ul><p>如果音频捕获失败，镜像会继续仅传输视频（由于音频默认启用，若音频不可用，scrcpy 不会直接失败，除非设置了 <code>--require-audio</code>）。</p><h2 id="禁用音频" tabindex="-1">禁用音频 <a class="header-anchor" href="#禁用音频" aria-label="Permalink to &quot;禁用音频&quot;">​</a></h2><p>要禁用音频功能：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>scrcpy --no-audio</span></span></code></pre></div><p>若仅禁用音频播放，请参阅<a href="/zhHans/reference/scrcpy/video#no-playback">禁用播放</a>。</p><h2 id="仅音频模式" tabindex="-1">仅音频模式 <a class="header-anchor" href="#仅音频模式" aria-label="Permalink to &quot;仅音频模式&quot;">​</a></h2><p>要仅播放音频，需禁用视频和控制功能：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-video</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-control</span></span></code></pre></div><p>要在无窗口模式下播放音频：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --no-video 和 --no-control 会被 --no-window 隐含</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-window</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 按 Ctrl+C 中断</span></span></code></pre></div><p>无视频时，音频延迟通常不关键，因此可以增加<a href="#buffering">缓冲</a>以减少卡顿：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>scrcpy --no-video --audio-buffer=200</span></span></code></pre></div><h2 id="音频源" tabindex="-1">音频源 <a class="header-anchor" href="#音频源" aria-label="Permalink to &quot;音频源&quot;">​</a></h2><p>默认情况下，转发的是设备音频输出。</p><p>也可以捕获设备麦克风输入：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>scrcpy --audio-source=mic</span></span></code></pre></div><p>例如，将设备用作录音机并直接在电脑上录制：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>scrcpy --audio-source=mic --no-video --no-playback --record=file.opus</span></span></code></pre></div><p>支持的音频源包括：</p><ul><li><code>output</code>（默认）：转发全部音频输出，并禁用设备播放（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#REMOTE_SUBMIX" target="_blank" rel="noreferrer"><code>REMOTE_SUBMIX</code></a>）。</li><li><code>playback</code>：捕获音频播放（Android 应用可选择退出，因此不一定能捕获全部输出）。</li><li><code>mic</code>：捕获麦克风输入（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#MIC" target="_blank" rel="noreferrer"><code>MIC</code></a>）。</li><li><code>mic-unprocessed</code>：捕获未经处理的麦克风原始音频（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#UNPROCESSED" target="_blank" rel="noreferrer"><code>UNPROCESSED</code></a>）。</li><li><code>mic-camcorder</code>：捕获为视频录制优化的麦克风音频，方向与摄像头一致（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#CAMCORDER" target="_blank" rel="noreferrer"><code>CAMCORDER</code></a>）。</li><li><code>mic-voice-recognition</code>：捕获为语音识别优化的麦克风音频（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#VOICE_RECOGNITION" target="_blank" rel="noreferrer"><code>VOICE_RECOGNITION</code></a>）。</li><li><code>mic-voice-communication</code>：捕获为语音通信优化的麦克风音频（例如支持回声消除或自动增益控制）（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#VOICE_COMMUNICATION" target="_blank" rel="noreferrer"><code>VOICE_COMMUNICATION</code></a>）。</li><li><code>voice-call</code>：捕获语音通话（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#VOICE_CALL" target="_blank" rel="noreferrer"><code>VOICE_CALL</code></a>）。</li><li><code>voice-call-uplink</code>：仅捕获语音通话上行链路（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#VOICE_UPLINK" target="_blank" rel="noreferrer"><code>VOICE_UPLINK</code></a>）。</li><li><code>voice-call-downlink</code>：仅捕获语音通话下行链路（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#VOICE_DOWNLINK" target="_blank" rel="noreferrer"><code>VOICE_DOWNLINK</code></a>）。</li><li><code>voice-performance</code>：捕获适用于实时表演（如卡拉OK）的音频，包括麦克风和设备播放（映射到 <a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource#VOICE_PERFORMANCE" target="_blank" rel="noreferrer"><code>VOICE_PERFORMANCE</code></a>）。</li></ul><h3 id="音频复制" tabindex="-1">音频复制 <a class="header-anchor" href="#音频复制" aria-label="Permalink to &quot;音频复制&quot;">​</a></h3><p>另一种设备音频捕获方法（仅限 Android 13 及以上版本）：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>scrcpy --audio-source=playback</span></span></code></pre></div><p>此音频源支持在镜像时保持设备音频播放，通过 <code>--audio-dup</code> 实现：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-source=playback</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-dup</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或简写为：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-dup</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 隐含 --audio-source=playback</span></span></code></pre></div><p>但需要 Android 13 及以上版本，且 Android 应用可选择退出捕获。</p><p>详见 <a href="https://github.com/Genymobile/scrcpy/issues/4380" target="_blank" rel="noreferrer">#4380</a>。</p><h2 id="编解码器" tabindex="-1">编解码器 <a class="header-anchor" href="#编解码器" aria-label="Permalink to &quot;编解码器&quot;">​</a></h2><p>可选择音频编解码器，可选值为 <code>opus</code>（默认）、<code>aac</code>、<code>flac</code> 和 <code>raw</code>（未压缩的 PCM 16-bit LE）：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-codec=opus</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 默认</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-codec=aac</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-codec=flac</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-codec=raw</span></span></code></pre></div><p>如果出现以下错误：</p><blockquote><p>Failed to initialize audio/opus, error 0xfffffffe</p></blockquote><p>说明设备不支持 Opus 编码器，可尝试 <code>scrcpy --audio-codec=aac</code>。</p><p>高级用法中，可通过 <code>--audio-codec-options</code> 传递自定义参数给 <a href="https://developer.android.com/reference/android/media/MediaFormat" target="_blank" rel="noreferrer"><code>MediaFormat</code></a>，详见手册或 <code>scrcpy --help</code>。</p><p>例如，调整 <a href="https://developer.android.com/reference/android/media/MediaFormat#KEY_FLAC_COMPRESSION_LEVEL" target="_blank" rel="noreferrer">FLAC 压缩级别</a>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-codec=flac</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-codec-options=flac-compression-level=8</span></span></code></pre></div><h2 id="编码器" tabindex="-1">编码器 <a class="header-anchor" href="#编码器" aria-label="Permalink to &quot;编码器&quot;">​</a></h2><p>设备上可能有多个编码器可用，可通过以下命令列出：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --list-encoders</span></span></code></pre></div><p>选择特定编码器：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-codec=opus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-encoder=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c2.android.opus.encoder&#39;</span></span></code></pre></div><h2 id="比特率" tabindex="-1">比特率 <a class="header-anchor" href="#比特率" aria-label="Permalink to &quot;比特率&quot;">​</a></h2><p>默认音频比特率为 128Kbps，可通过以下命令调整：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-bit-rate=64K</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-bit-rate=64000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 等效</span></span></code></pre></div><p><em>此参数不适用于 RAW 音频编解码器（<code>--audio-codec=raw</code>）。</em></p><h2 id="缓冲" tabindex="-1">缓冲 <a class="header-anchor" href="#缓冲" aria-label="Permalink to &quot;缓冲&quot;">​</a></h2><p>音频缓冲不可避免。需在低延迟（避免卡顿）和足够缓冲（减少欠载）之间平衡。</p><p>默认缓冲大小为 50ms，可调整：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-buffer=40</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 比默认值小</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-buffer=100</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 比默认值大</span></span></code></pre></div><p>注意：此选项设置的是目标缓冲值，实际缓冲可能因欠载等原因无法达到目标值。</p><p>若不与设备交互（如观看视频），可增加<a href="/zhHans/reference/scrcpy/video#buffering">视频</a>和音频缓冲以平滑播放：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>scrcpy --video-buffer=200 --audio-buffer=200</span></span></code></pre></div><p>还可配置另一音频缓冲（音频输出缓冲），默认为 5ms。除非出现<a href="https://github.com/Genymobile/scrcpy/issues/3793" target="_blank" rel="noreferrer">机器人声或卡顿</a>，否则不建议修改：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 仅在绝对必要时使用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --audio-output-buffer=10</span></span></code></pre></div>`,57),n=[o];function t(p,r,c,l,h,k){return s(),a("div",null,n)}const b=e(d,[["render",t]]);export{g as __pageData,b as default};
