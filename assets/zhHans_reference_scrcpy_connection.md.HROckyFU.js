import{_ as s,c as i,o as a,aj as e}from"./chunks/framework.MtKKuSHf.js";const b=JSON.parse('{"title":"Connection（连接）","description":"","frontmatter":{"title":"Connection（连接）"},"headers":[],"relativePath":"zhHans/reference/scrcpy/connection.md","filePath":"zhHans/reference/scrcpy/connection.md","lastUpdated":1744899284000}'),t={name:"zhHans/reference/scrcpy/connection.md"},n=e(`<h1 id="连接" tabindex="-1">连接 <a class="header-anchor" href="#连接" aria-label="Permalink to &quot;连接&quot;">​</a></h1><h2 id="设备选择" tabindex="-1">设备选择 <a class="header-anchor" href="#设备选择" aria-label="Permalink to &quot;设备选择&quot;">​</a></h2><p>如果仅有一台设备已连接（即通过 <code>adb devices</code> 列出），则该设备会被自动选中。</p><p>但如果有多台设备连接，您需要通过以下4种方式之一指定要使用的设备：</p><ul><li>通过设备序列号：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --serial=0123456789abcdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0123456789abcdef</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 简写形式  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果通过 TCP/IP 连接，序列号为 IP:端口（与 adb 行为一致）  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --serial=192.168.1.1:5555</span></span></code></pre></div></li><li>选择通过 USB 连接的设备（仅限一台）：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --select-usb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 简写形式</span></span></code></pre></div></li><li>选择通过 TCP/IP 连接的设备（仅限一台）：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --select-tcpip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 简写形式</span></span></code></pre></div></li><li>选择已监听 TCP/IP 连接的设备（见<a href="#tcpip-无线连接">下文</a>）：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tcpip=192.168.1.1:5555</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tcpip=192.168.1.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 默认端口为 5555</span></span></code></pre></div></li></ul><p>设备序列号也可以通过环境变量 <code>ANDROID_SERIAL</code> 提供（该变量同样被 <code>adb</code> 使用）：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 bash 中  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ANDROID_SERIAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">0123456789abcdef  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span></span></code></pre></div><div class="language-cmd vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:: 在 cmd 中  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ANDROID_SERIAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">0123456789abcdef  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scrcpy</span></span></code></pre></div><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 PowerShell 中  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">env:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ANDROID_SERIAL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0123456789abcdef&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scrcpy</span></span></code></pre></div><h2 id="tcp-ip-无线连接" tabindex="-1">TCP/IP（无线连接） <a class="header-anchor" href="#tcp-ip-无线连接" aria-label="Permalink to &quot;TCP/IP（无线连接）&quot;">​</a></h2><p><em>Scrcpy</em> 使用 <code>adb</code> 与设备通信，而 <code>adb</code> 可以通过 TCP/IP <a href="https://developer.android.com/studio/command-line/adb.html#wireless" target="_blank" rel="noreferrer">连接</a> 设备。设备必须与计算机连接在同一网络中。</p><h3 id="自动连接" tabindex="-1">自动连接 <a class="header-anchor" href="#自动连接" aria-label="Permalink to &quot;自动连接&quot;">​</a></h3><p>选项 <code>--tcpip</code> 支持自动配置连接。它有两种使用方式。</p><p>如果设备未启用 <em>adb</em> TCP/IP 模式（或您不知道设备的 IP 地址），请先通过 USB 连接设备，然后运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tcpip</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 不带参数</span></span></code></pre></div><p>该命令会自动查找设备的 IP 地址和 adb 端口，必要时启用 TCP/IP 模式，并在启动前连接到设备。</p><p>如果设备（本例中为 192.168.1.1）已监听某个端口（通常为 5555）以接收 <em>adb</em> 连接，则直接运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tcpip=192.168.1.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 默认端口为 5555  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tcpip=192.168.1.1:5555</span></span></code></pre></div><p>在地址前添加 &#39;+&#39; 可强制重新连接：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tcpip=+192.168.1.1</span></span></code></pre></div><h3 id="手动连接" tabindex="-1">手动连接 <a class="header-anchor" href="#手动连接" aria-label="Permalink to &quot;手动连接&quot;">​</a></h3><p>您也可以手动通过 <code>adb</code> 启用 TCP/IP 连接：</p><ol><li>将设备通过 USB 连接到计算机。</li><li>将设备与计算机连接到同一 Wi-Fi 网络。</li><li>获取设备 IP 地址，可通过“设置 → 关于手机 → 状态”查看，或执行以下命令：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $9}&#39;</span></span></code></pre></div></li><li>在设备上启用 TCP/IP 模式的 <code>adb</code>：<code>adb tcpip 5555</code>。</li><li>拔掉设备 USB 线。</li><li>连接到设备：<code>adb connect 设备IP:5555</code>（将 <code>设备IP</code> 替换为实际的 IP 地址）。</li><li>像往常一样运行 <code>scrcpy</code>。</li><li>完成后运行 <code>adb disconnect</code>。</li></ol><p>从 Android 11 开始，<a href="https://developer.android.com/studio/command-line/adb#wireless-android11-command-line" target="_blank" rel="noreferrer">无线调试选项</a> 允许您无需物理连接设备即可完成操作。</p><h2 id="自动启动" tabindex="-1">自动启动 <a class="header-anchor" href="#自动启动" aria-label="Permalink to &quot;自动启动&quot;">​</a></h2><p><em>scrcpy</em> 作者开发的一个小工具 <a href="https://github.com/rom1v/autoadb" target="_blank" rel="noreferrer">AutoAdb</a> 可以在检测到新 Android 设备连接时自动运行任意命令。您可以用它来启动 scrcpy：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">autoadb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scrcpy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{}&#39;</span></span></code></pre></div>`,27),p=[n];function l(h,d,c,k,r,o){return a(),i("div",null,p)}const y=s(t,[["render",l]]);export{b as __pageData,y as default};
